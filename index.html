<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Validación con Autómatas: Email y Contraseña</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="app">
      <div class="left">
        <h1>Login con Autómatas</h1>
        <div class="subtitle">Valida correo y contraseña en tiempo real con DFA visualizado.</div>

        <!-- Inputs permanecen aquí -->
        <div class="field">
          <label for="email">Correo electrónico</label>
          <div class="input-row">
            <input id="email" type="text" placeholder="usuario@dominio.com" autocomplete="off" />
            <div class="badge">—</div>
          </div>
        </div>

        <div class="field">
          <label for="password">Contraseña</label>
          <div class="input-row">
            <input id="password" type="password" placeholder="Al menos 8, con min+MAY+dig" autocomplete="off" />
            <div class="badge">—</div>
          </div>
        </div>

        <div class="controls">
          <label class="toggle">
            <input id="animate" type="checkbox" />
            Animar recorrido del autómata
          </label>
          <div class="tabs">
            <button id="tab-email" class="tab active">Autómata Email</button>
            <button id="tab-pwd" class="tab">Autómata Contraseña</button>
          </div>
        </div>

        <!-- NUEVO: Paso a paso movido a la zona señalada (columna izquierda) -->
        <div id="steps-drawer" class="steps-drawer">
          <div class="steps-header">
            <span class="title">Paso a paso</span>
            <span id="active-automaton" class="pill">Email</span>
          </div>
          <div id="email-steps" class="steps-wrap"></div>
          <div id="pwd-steps" class="steps-wrap hidden"></div>
        </div>
      </div>

      <div class="right">
        <div class="panels">
          <div id="panel-email" class="panel">
            <div class="svg-wrap">
              <div id="email-state-badge" class="state-badge">Estado: S</div>
              <svg id="email-svg" viewBox="0 0 640 420" preserveAspectRatio="xMidYMid meet"></svg>
            </div>

            <div class="legend">
              <div class="item"><span class="swatch node"></span> Estado</div>
              <div class="item"><span class="swatch node accepting"></span> Aceptación</div>
              <div class="item"><span class="swatch node trap"></span> Trampa</div>
              <div class="item"><span class="swatch edge"></span> Arista recorrida</div>
              <div class="item"><span class="swatch start"></span> Inicio</div>
            </div>

            <div class="progress">
              <div class="label">Recorrido</div>
              <div id="email-progress" class="progress-text">—</div>
            </div>

            <div class="help">
              <strong>Estados:</strong> S (inicio), L (local), D (dominio), AFTER_DOT (tras '.'), TLD (tld), TRAP (error).
            </div>
          </div>

          <div id="panel-pwd" class="panel hidden">
            <div class="svg-wrap">
              <div id="pwd-state-badge" class="state-badge">Estado: 000</div>
              <svg id="pwd-svg" viewBox="0 0 640 420" preserveAspectRatio="xMidYMid meet"></svg>
            </div>

            <div class="legend">
              <div class="item"><span class="swatch node"></span> Estado</div>
              <div class="item"><span class="swatch node accepting"></span> Aceptación</div>
              <div class="item"><span class="swatch node trap"></span> Trampa</div>
              <div class="item"><span class="swatch edge"></span> Arista recorrida</div>
              <div class="item"><span class="swatch start"></span> Inicio</div>
            </div>

            <div class="progress">
              <div class="label">Recorrido</div>
              <div id="pwd-progress" class="progress-text">—</div>
            </div>

            <div class="help">
              <strong>Bits (L,U,D):</strong> L=minúscula, U=mayúscula, D=dígito. Acepta en 111 con longitud ≥ 8.
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tooltip global para descripciones en hover -->
    <div id="tooltip" class="tooltip hidden"></div>

     <a
      class="repo-button"
      href="https://github.com/ledesmamesac-prog/Validathor/tree/main"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Abrir repositorio Validathor en GitHub"
      title="Abrir repositorio en GitHub"
    >
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false">
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.16 6.84 9.49.5.09.68-.22.68-.48 0-.24-.01-.87-.01-1.71-2.78.6-3.37-1.34-3.37-1.34-.45-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.61.07-.61 1.01.07 1.54 1.04 1.54 1.04.9 1.54 2.36 1.09 2.94.83.09-.65.35-1.09.63-1.34-2.22-.25-4.56-1.11-4.56-4.95 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.27.1-2.65 0 0 .84-.27 2.75 1.02A9.56 9.56 0 0112 6.8c.85.004 1.71.115 2.51.34 1.9-1.29 2.74-1.02 2.74-1.02.55 1.38.2 2.4.10 2.65.64.7 1.03 1.59 1.03 2.68 0 3.85-2.34 4.7-4.57 4.95.36.31.68.92.68 1.85 0 1.33-.01 2.4-.01 2.72 0 .26.18.57.69.47A10.02 10.02 0 0022 12c0-5.52-4.48-10-10-10z"
          fill="currentColor" />
      </svg>
    </a>
    
    <script src="./regex.js"></script>
    <script src="./script.js"></script>
  </body>
</html>
